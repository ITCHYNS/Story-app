importScripts("https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-sw.js"),workbox?(console.log("Workbox berhasil dimuat!"),workbox.core.skipWaiting(),workbox.core.clientsClaim(),workbox.precaching.precacheAndRoute(self.__WB_MANIFEST),workbox.routing.registerRoute((({url:o})=>o.href.startsWith("https://story-api.dicoding.dev")),new workbox.strategies.NetworkFirst({cacheName:"story-api-cache",plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:50,maxAgeSeconds:300})]})),workbox.routing.registerRoute((({request:o})=>"image"===o.destination),new workbox.strategies.CacheFirst({cacheName:"image-cache",plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:60,maxAgeSeconds:2592e3})]}))):console.log("Workbox gagal dimuat."),self.addEventListener("push",(o=>{if(!o.data)return void console.log("Push received with no data");let t="Story Map",e="You have a new notification.";const i="favicon.png";let n=".";try{const i=o.data.json();t=i.title||t,e=i.body||e,n=i.url||n}catch(t){console.log("Push data is not JSON, treating as text."),e=o.data.text()}const a={body:e,icon:i,badge:i,tag:"story-map-notification",data:{url:n}};o.waitUntil(self.registration.showNotification(t,a))})),self.addEventListener("notificationclick",(o=>{o.notification.close();const t=o.notification.data.url||".";o.waitUntil(clients.matchAll({type:"window"}).then((o=>{for(const e of o)if(e.url.includes(t)&&"focus"in e)return e.focus();if(clients.openWindow)return clients.openWindow(t)})))}));